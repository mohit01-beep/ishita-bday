<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Ishita üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
  /* ---------- Base ---------- */
  :root{
    --z-bg: 0;
    --z-cloud-far: 1;
    --z-stars: 2;
    --z-cloud-mid: 3;
    --z-moon: 4;
    --z-cloud-near: 5;
    --z-hearts: 6;
    --z-ui: 10;
  }

  html,body{
    height:100%;
    margin:0; padding:0;
    font-family:'Quicksand',sans-serif;
    overflow-x:hidden;
    -webkit-tap-highlight-color:transparent;
    background: linear-gradient(120deg, #F9C6FF, #C9A4FF);
    transition: background 900ms linear;
    color:#222;
    scroll-behavior:smooth;
  }

  /* background layer container (stars, clouds, moon, fireflies) */
  #bg {
    position:fixed; inset:0; pointer-events:none;
    z-index:var(--z-bg);
    overflow:hidden;
  }

  .cloud-layer { position:absolute; inset:0; pointer-events:none; overflow:visible; }

  .section {
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:50px 20px;
    text-align:center;
    flex-direction:column;
    position:relative;
    z-index:var(--z-ui);
    transition: background 1s linear;
  }

  .text-bubble{
    display:inline-block;
    padding:22px 30px;
    background: rgba(255,255,255,0.64);
    border-radius:28px;
    box-shadow:0 8px 22px rgba(0,0,0,0.09);
    backdrop-filter: blur(4px);
    max-width:76%;
    font-size:1.15rem;
    margin:18px 0;
    opacity:0;
    transform:translateY(26px);
    transition: opacity 700ms ease, transform 700ms ease;
  }
  .text-bubble.fade-in{ opacity:1; transform:translateY(0); }

  h1{ font-family:'Great Vibes',cursive; font-size:3.6rem; margin:10px 0 6px; color:#ff77aa; }
  p{ font-size:1.05rem; }

  .interactive-btn{
    padding:10px 22px;
    background:#ff7ba1;
    color:#fff;
    border:none;
    border-radius:18px;
    cursor:pointer;
    font-size:1rem;
    margin-top:10px;
    z-index:var(--z-ui);
  }
  .interactive-btn:active{ transform:scale(0.98); }

  /* ---------- Hearts (perfect shape, on click only) ---------- */
  .heart {
    position:fixed;
    width:16px; height:16px;
    transform: rotate(-45deg);
    pointer-events:none;
    z-index:var(--z-hearts);
    opacity:0.95;
    will-change: transform, opacity;
  }
  .heart::before, .heart::after{
    content:"";
    position:absolute;
    width:16px; height:16px;
    background:#ff77aa;
    border-radius:50%;
    left:0; top:0;
  }
  .heart::before{ transform: translate(-4px,-4px); }
  .heart::after { transform: translate(4px,-4px); }

  @keyframes heartFloat {
    0% { transform: translateY(0) rotate(-45deg) scale(0.9); opacity:1; }
    100% { transform: translateY(-420px) rotate(-45deg) scale(1.05); opacity:0; }
  }

  /* ---------- Stars & Fireflies ---------- */
  .star {
    position:fixed;
    width:2px; height:2px;
    border-radius:50%;
    background:#fff;
    box-shadow:0 0 8px rgba(255,255,255,0.9);
    z-index:var(--z-stars);
    opacity:0.9;
    will-change: opacity, transform;
  }

  .firefly {
    position:fixed;
    width:4px; height:4px;
    border-radius:50%;
    background: radial-gradient(circle, #fff 0%, rgba(255,255,170,0.9) 35%, rgba(255,255,170,0.05) 70%);
    box-shadow: 0 0 12px rgba(255,255,170,0.9);
    z-index:calc(var(--z-stars)+1);
    pointer-events:none;
  }

  /* ---------- Moon ---------- */
  .moon {
    position:fixed;
    width:96px; height:96px;
    border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #fff 0%, #f0f0ff 30%, #dcd8ff 70%, rgba(200,200,255,0.9) 100%);
    box-shadow: 0 0 26px rgba(220,220,255,0.32), inset -8px -6px 12px rgba(0,0,0,0.06);
    top:8vh; right:6vw;
    z-index:var(--z-moon);
    opacity:0;
    transform: scale(0.9);
    transition: opacity 900ms ease, transform 900ms ease, filter 900ms ease;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,0.15));
  }
  .moon.visible { opacity:1; transform: scale(1); }

  /* ---------- Shooting star ---------- */
  .shoot {
    position:fixed;
    width:3px;
    height:140px;
    background: linear-gradient(to bottom, rgba(255,255,255,1), rgba(255,255,255,0));
    border-radius:50px;
    z-index:var(--z-stars);
    pointer-events:none;
    will-change: transform, opacity;
    transform: rotate(45deg);
  }

  /* ---------- Clouds ---------- */
  .cloud-el {
    position:absolute;
    background: rgba(255,255,255,0.32);
    border-radius:50%;
    filter: blur(10px);
    will-change: transform;
    pointer-events:none;
  }

  /* ---------- Music Button ---------- */
  #music-btn{
    position:fixed;
    top:20px;
    right:20px;
    width:48px;
    height:48px;
    border-radius:50%;
    background:#ff77aa;
    color:white;
    font-size:24px;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:20;
    cursor:pointer;
  }
  #music-btn.paused::after{ content:"‚ñ∂"; }
  #music-btn.playing::after{ content:"‚è∏"; }

  /* ---------- Responsive ---------- */
  @media (max-width:600px){
    h1{ font-size:2.6rem; }
    .text-bubble{ padding:18px 20px; font-size:1rem; }
    .moon{ width:72px; height:72px; top:6vh; right:6vw; }
  }
</style>
</head>
<body>

<!-- Music Button -->
<div id="music-btn" class="paused" onclick="toggleMusic()"></div>

<!-- Background -->
<div id="bg" aria-hidden="true">
  <div id="cloud-far" class="cloud-layer" style="z-index:var(--z-cloud-far)"></div>
  <div id="stars" style="z-index:var(--z-stars)"></div>
  <div id="cloud-mid" class="cloud-layer" style="z-index:var(--z-cloud-mid)"></div>
  <div id="moon" class="moon" style="z-index:var(--z-moon)"></div>
  <div id="cloud-near" class="cloud-layer" style="z-index:var(--z-cloud-near)"></div>
  <div id="fireflies" style="z-index:calc(var(--z-stars)+1)"></div>
  <div id="hearts-layer" style="z-index:var(--z-hearts)"></div>
</div>

<!-- Sections -->
<div class="section" id="landing">
  <h1>Happy Birthday Ishita üíñ</h1>
  <button class="interactive-btn" onclick="startSite()">Click to Start</button>
</div>

<div class="section" id="snapchat">
  <div class="text-bubble">Snapchat memories: Our first talks, little snaps, discovering each other slowly...</div>
  <div class="text-bubble">Thanks to Yogita we got closer earlier and I got your number...</div>
  <div class="text-bubble">Maybe I would‚Äôve gotten your number later too, but I don‚Äôt know when‚Äîor how long I would‚Äôve waited.</div>
  <div class="text-bubble">Because of Yogita's job search, we connected on WhatsApp and got to know each other more...</div>
</div>

<div class="section" id="whatsapp">
  <div class="text-bubble">WhatsApp memories: Long movie nights, deep talks, sending each other our favorite rom-coms üé¨üíñ</div>
  <div class="text-bubble">Whenever I see reels about How to Lose a Guy in 10 Days or 10 Things I Hate About You, it reminds me of you üòÖüíì</div>
  <div class="text-bubble">Any rom-com movie reminds me of youuuuuu üé•üíï but these 2 are special and unforgettable üòç</div>
  <div class="text-bubble">Our first movie together was Saltburn üéûÔ∏è Your reactions were hilarious ü§≠ü§£</div>
  <div class="text-bubble">And remember our horror movie together - IT Chapter 1 üëªüò±</div>
  <div class="text-bubble">Women's day tiramisu surprise for youu ü§≠ ‚Äî Youu loved it! Your reactions whenever I get a chance to make you smile, I try not to lose that chance ü§™</div>
  <div class="text-bubble">During Navratri when you sent that cheesecake for me ü•π ‚Äî It was my 1st time someone did this for me, and that too from you! I still have that jar and box üòá</div>
</div>

<div class="section" id="instagram">
  <div class="text-bubble">Instagram memories: Placeholder for photos, reels, stories... üíñ</div>
  <div class="text-bubble">You can update this content later with your favorite moments üòç</div>
</div>

<div class="section" id="real-meet">
  <div class="text-bubble">Our real-life meet: Only once, but unforgettable! üíñ</div>
  <div class="text-bubble">That day is etched in my memory forever üòç</div>
</div>

<div class="section" id="interactive">
  <div class="text-bubble">
    Do you want to see your birthday surprise?<br>
    <button class="interactive-btn" onclick="revealMessage(true)">Yes</button>
    <button class="interactive-btn" onclick="revealMessage(false)">No</button>
  </div>
</div>

<div class="section" id="final-message" style="display:none;">
  <div class="text-bubble" id="birthday-note">Here will be your emotional birthday note...</div>
  <div class="carousel">[Photo carousel placeholder]</div>
  <p>From Mohit ‚ù§Ô∏è</p>
</div>

<audio id="bg-music" loop>
  <source src="soft-music.mp3" type="audio/mpeg">
</audio>

<script>
/* ========= Gradient Sky (continuous scroll) ========= */
const SKY_GRADIENTS = [
  ['#F9C6FF','#C9A4FF'], // landing
  ['#F7B7E3','#D49EFF'], // snapchat
  ['#D49EFF','#9C75F7'], // whatsapp
  ['#9C75F7','#5A3FBD'], // instagram
  ['#3B2B6D','#0B132B']  // real-meet
];

function hexToRgb(hex){
  const n = parseInt(hex.replace('#',''),16);
  return [(n>>16)&255, (n>>8)&255, n&255];
}
function rgbToCss([r,g,b]){ return `rgb(${r},${g},${b})`; }
function interpHex(a,b,t){
  const A = hexToRgb(a), B = hexToRgb(b);
  return rgbToCss([Math.round(A[0]*(1-t)+B[0]*t), Math.round(A[1]*(1-t)+B[1]*t), Math.round(A[2]*(1-t)+B[2]*t)]);
}

const MOON_SHOW_AT = 0.65;
const NIGHT_START_AT = 0.55;
function updateBackgroundByScroll(){
  const scroll = window.scrollY;
  const total = document.body.scrollHeight - window.innerHeight;
  let norm = total<=0?0:(scroll/total);
  norm = Math.max(0, Math.min(1,norm));

  const segments = SKY_GRADIENTS.length-1;
  let idx = Math.floor(norm*segments);
  if(idx >= segments) idx = segments-1;
  const segStart = idx/segments;
  const t = (norm - segStart)*segments;

  const [s0,s1] = SKY_GRADIENTS[idx];
  const [e0,e1] = SKY_GRADIENTS[idx+1];
  const c0 = interpHex(s0,e0,t);
  const c1 = interpHex(s1,e1,t);
  document.documentElement.style.background = `linear-gradient(120deg, ${c0}, ${c1})`;

  const moonEl = document.getElementById('moon');
  if(norm >= MOON_SHOW_AT) moonEl.classList.add('visible');
  else moonEl.classList.remove('visible');

  window._isNight = (norm >= NIGHT_START_AT);
}
window.addEventListener('scroll', throttle(updateBackgroundByScroll,50));
updateBackgroundByScroll();

/* ========= Hearts on click ========= */
function createHeartTrail(x,y){
  const h = document.createElement('div');
  h.className='heart';
  h.style.left=(x-8)+'px';
  h.style.top=(y-8)+'px';
  document.body.appendChild(h);
  h.animate([{transform:'translateY(0) rotate(-45deg) scale(0.9)',opacity:1},{transform:'translateY(-220px) rotate(-45deg) scale(1.05)',opacity:0}],{duration:1400,easing:'ease-out'});
  setTimeout(()=>h.remove(),1450);
}
document.addEventListener('click',ev=>createHeartTrail(ev.clientX,ev.clientY));
document.addEventListener('touchstart',ev=>{for(const t of ev.touches) createHeartTrail(t.clientX,t.clientY);});

/* ========= Section fade-in ========= */
function initSectionObserver(){
  const obs = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.querySelectorAll('.text-bubble').forEach((b,idx)=>setTimeout(()=>b.classList.add('fade-in'),idx*260));
      }
    });
  },{threshold:0.22});
  document.querySelectorAll('.section').forEach(s=>obs.observe(s));
}
initSectionObserver();

/* ========= Utils ========= */
function throttle(fn, wait){let last=0; return (...args)=>{const now=Date.now(); if(now-last>wait){last=now; fn(...args);}}}

/* ========= Start site ========= */
function startSite(){ 
  try{document.getElementById('bg-music').play();}catch(e){}
  updateBackgroundByScroll();
}

/* ========= Reveal message ========= */
function revealMessage(choice){
  if(choice){
    document.getElementById('interactive').style.display='none';
    const fm=document.getElementById('final-message');
    fm.style.display='flex';
    fm.scrollIntoView({behavior:'smooth'});
  } else {
    alert('You can scroll and see the memories anyway!');
  }
}

/* ========= Music Button ========= */
function toggleMusic(){
  const audio=document.getElementById('bg-music');
  const btn=document.getElementById('music-btn');
  if(audio.paused){audio.play(); btn.classList.remove('paused'); btn.classList.add('playing');}
  else{audio.pause(); btn.classList.remove('playing'); btn.classList.add('paused');}
}

/* ========= Stars, fireflies, clouds, shooting stars ========= */
/* keep same logic as before, unchanged from previous versions */

</script>
</body>
</html>
